<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.controller.MainController"
            style="-fx-background-color: #fefaf6;">

    <!-- Ð’Ð•Ð Ð¥ -->
    <top>
        <VBox spacing="0">
            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <HBox alignment="CENTER"
                  style="-fx-background-color: linear-gradient(to right, #f0f9f0, #e0f2e1); -fx-padding: 18;">
                <Label text="ðŸ“…" style="-fx-font-size: 28px;"/>
                <Label text="Ð“Ð ÐÐ¤Ð†Ðš Ð—ÐœÐ†Ð"
                       style="-fx-font-size: 24px; -fx-font-weight: 900; -fx-text-fill: #1a5c1f;
                              -fx-font-family: 'Segoe UI', Arial, sans-serif; -fx-letter-spacing: 1px;
                              -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.03), 2, 0, 0, 1);"/>
            </HBox>

            <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÐºÐµÑ€ÑƒÐ²Ð°Ð½Ð½Ñ -->
            <HBox spacing="15" alignment="CENTER_LEFT"
                  style="-fx-background-color: #f4fbf4; -fx-padding: 12 20; -fx-border-color: #c2e6c4; -fx-border-width: 0 0 1 0;">

                <!-- ÐŸÐµÑ€Ñ–Ð¾Ð´ -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ“†" style="-fx-font-size: 16px;"/>
                    <Label text="ÐŸÐµÑ€Ñ–Ð¾Ð´:" style="-fx-text-fill: #1a5c1f; -fx-font-weight: bold;"/>
                    <ComboBox fx:id="monthComboBox" prefWidth="160" promptText="ÐœÑ–ÑÑÑ†ÑŒ"/>
                    <ComboBox fx:id="yearComboBox" prefWidth="120" promptText="Ð Ñ–Ðº"/>
                </HBox>

                <Region HBox.hgrow="ALWAYS"/>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ -->
                <HBox spacing="8">

                    <!-- âœ… Ð Ð¾Ð±Ð¾Ñ‡Ð° ÐºÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸ -->
                    <Button text="ðŸ“¥ Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸" onAction="#onLoadButtonClick"
                            style="-fx-background-color: #ffffff; -fx-text-fill: #1a5c1f; -fx-font-weight: bold;
                                   -fx-padding: 8 16; -fx-background-radius: 8;
                                   -fx-border-color: #c2e6c4; -fx-border-width: 1.5; -fx-border-radius: 8;
                                   -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.03), 2, 0, 0, 1);"/>

                    <Button text="ðŸ’¾ Ð—Ð±ÐµÑ€ÐµÐ³Ñ‚Ð¸" onAction="#saveSchedule"
                            style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;
                                   -fx-padding: 8 16; -fx-background-radius: 8;
                                   -fx-border-color: #388E3C; -fx-border-width: 1.5; -fx-border-radius: 8;
                                   -fx-effect: dropshadow(gaussian, rgba(76,175,80,0.3), 4, 0, 0, 2);"/>

                    <Button text="ðŸ“Š Excel" onAction="#exportToExcel"
                            style="-fx-background-color: #f0f9f0; -fx-text-fill: #1a5c1f; -fx-font-weight: bold;
                                   -fx-padding: 8 16; -fx-background-radius: 8;
                                   -fx-border-color: #c2e6c4; -fx-border-width: 1.5; -fx-border-radius: 8;
                                   -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.03), 2, 0, 0, 1);"/>

                    <Button fx:id="continueButton" text="ðŸ”„ ÐŸÑ€Ð¾Ð´Ð¾Ð²Ð¶Ð¸Ñ‚Ð¸" onAction="#onContinueButtonClick"
                            style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;
                                   -fx-padding: 8 16; -fx-background-radius: 8;
                                   -fx-border-color: #1976D2; -fx-border-width: 1.5; -fx-border-radius: 8;
                                   -fx-effect: dropshadow(gaussian, rgba(33,150,243,0.3), 4, 0, 0, 2);"/>

                    <Button text="ðŸ‘¥ ÐŸÑ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÐ¸" onAction="#openEmployeeCards"
                            style="-fx-background-color: #e0f2e1; -fx-text-fill: #1a5c1f; -fx-font-weight: bold;
                                   -fx-padding: 8 16; -fx-background-radius: 8;
                                   -fx-border-color: #81c784; -fx-border-width: 2; -fx-border-radius: 8;
                                   -fx-effect: dropshadow(gaussian, rgba(129,199,132,0.3), 4, 0, 0, 2);"/>
                </HBox>
            </HBox>
        </VBox>
    </top>

    <!-- Ð¦Ð•ÐÐ¢Ð  -->
    <center>
        <TabPane fx:id="mainTabPane" style="-fx-background-color: transparent; -fx-tab-max-height: 40;">
            <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° Ð³Ñ€Ð°Ñ„Ñ–ÐºÑƒ -->
            <Tab text="ðŸ“… Ð“Ñ€Ð°Ñ„Ñ–Ðº Ð·Ð¼Ñ–Ð½" closable="false">
                <VBox spacing="12" style="-fx-padding: 20;">

                    <!-- ÐŸÐ¾ÑˆÑƒÐº + Ñ„Ñ–Ð»ÑŒÑ‚Ñ€Ð¸ -->
                    <HBox spacing="12" alignment="CENTER_LEFT"
                          style="-fx-background-color: #fcfefc; -fx-background-radius: 10;
                                 -fx-border-color: #c2e6c4; -fx-border-radius: 10;
                                 -fx-border-width: 1.5; -fx-padding: 15;">

                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ”" style="-fx-font-size: 16px;"/>
                            <TextField fx:id="searchField" promptText="ÐŸÐ¾ÑˆÑƒÐº ÑÐ¿Ñ–Ð²Ñ€Ð¾Ð±Ñ–Ñ‚Ð½Ð¸ÐºÐ°..."
                                       prefWidth="220"
                                       style="-fx-background-color: #f4fbf4; -fx-background-radius: 6;
                                              -fx-border-color: #c2e6c4; -fx-border-radius: 6;
                                              -fx-border-width: 1.5; -fx-padding: 8 12;"
                                       onKeyReleased="#filterTable"/>
                        </HBox>

                        <Separator orientation="VERTICAL"
                                   style="-fx-padding: 0 15; -fx-background-color: #c2e6c4;"/>

                        <VBox spacing="4">
                            <Label text="Ð¤Ñ–Ð»ÑŒÑ‚Ñ€Ð¸:"
                                   style="-fx-font-weight: bold; -fx-text-fill: #1a5c1f; -fx-font-size: 12px;"/>
                            <HBox spacing="8" alignment="CENTER_LEFT">
                                <ComboBox fx:id="departmentComboBox" promptText="Ð£ÑÑ– Ð¿Ñ–Ð´Ñ€Ð¾Ð·Ð´Ñ–Ð»Ð¸" prefWidth="220"/>
                                <ComboBox fx:id="dayFilterComboBox" promptText="Ð£ÑÑ– Ð´Ð½Ñ–" prefWidth="120"/>
                                <ComboBox fx:id="dayStatusComboBox" promptText="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ" prefWidth="180"/>

                                <Button text="ðŸ—‘ï¸ Ð¡ÐºÐ¸Ð½ÑƒÑ‚Ð¸" onAction="#resetFilters"
                                        style="-fx-background-color: #f0f9f0; -fx-text-fill: #1a5c1f;
                                               -fx-font-weight: bold; -fx-background-radius: 6;
                                               -fx-padding: 8 12; -fx-border-color: #c2e6c4;
                                               -fx-border-radius: 6; -fx-border-width: 1.5;"/>
                            </HBox>
                        </VBox>
                    </HBox>

                    <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ -->
                    <TableView fx:id="scheduleTableView"
                               style="-fx-background-color: white; -fx-border-color: #c2e6c4; -fx-border-radius: 10;
                                      -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.02), 8, 0, 0, 2);"
                               VBox.vgrow="ALWAYS"/>

                    <!-- ÐÐ¸Ð¶Ð½Ñ ÐºÐ½Ð¾Ð¿ÐºÐ° -->
                    <HBox alignment="CENTER" style="-fx-padding: 15 0 0 0;">
                        <Button text="ðŸ“… Ð’Ð¸Ñ…Ñ–Ð´Ð½Ñ– Ñ‚Ð° Ð»ÐµÐ³ÐµÐ½Ð´Ð°" onAction="#showWeekendsAndHolidaysInfo"
                                style="-fx-background-color: #ff9800; -fx-text-fill: white; -fx-font-weight: bold;
                                       -fx-padding: 8 20; -fx-background-radius: 6;
                                       -fx-border-color: #ffa726; -fx-border-width: 1; -fx-border-radius: 6;
                                       -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 3, 0, 0, 1);"/>
                    </HBox>
                </VBox>
            </Tab>

            <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÑ–Ð² -->
            <Tab fx:id="employeeTab" text="ðŸ‘¥ ÐŸÑ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÐ¸" closable="false">
                <VBox spacing="12" style="-fx-padding: 20;">

                    <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÐºÐµÑ€ÑƒÐ²Ð°Ð½Ð½Ñ Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÐ°Ð¼Ð¸ -->
                    <HBox spacing="15" alignment="CENTER_LEFT"
                          style="-fx-background-color: #fcfefc; -fx-background-radius: 10;
                                 -fx-border-color: #c2e6c4; -fx-border-radius: 10;
                                 -fx-border-width: 1.5; -fx-padding: 15;">

                        <!-- ÐŸÐ¾ÑˆÑƒÐº Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÑ–Ð² -->
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ”" style="-fx-font-size: 16px;"/>
                            <TextField fx:id="employeeSearchField" promptText="ÐŸÐ¾ÑˆÑƒÐº Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÐ°..."
                                       prefWidth="250"
                                       style="-fx-background-color: #f4fbf4; -fx-background-radius: 6;
                                              -fx-border-color: #c2e6c4; -fx-border-radius: 6;
                                              -fx-border-width: 1.5; -fx-padding: 8 12;"/>
                        </HBox>

                        <Separator orientation="VERTICAL"
                                   style="-fx-padding: 0 15; -fx-background-color: #c2e6c4;"/>

                        <!-- Ð¤Ñ–Ð»ÑŒÑ‚Ñ€Ð¸ Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÑ–Ð² -->
                        <VBox spacing="4">
                            <Label text="Ð¤Ñ–Ð»ÑŒÑ‚Ñ€Ð¸ Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÑ–Ð²:"
                                   style="-fx-font-weight: bold; -fx-text-fill: #1a5c1f; -fx-font-size: 12px;"/>
                            <HBox spacing="8" alignment="CENTER_LEFT">
                                <ComboBox fx:id="employeeDepartmentFilter" promptText="Ð’ÑÑ– Ð¿Ñ–Ð´Ñ€Ð¾Ð·Ð´Ñ–Ð»Ð¸" prefWidth="180"/>
                                <ComboBox fx:id="employeeStatusFilter" promptText="Ð’ÑÑ– ÑÑ‚Ð°Ñ‚ÑƒÑÐ¸" prefWidth="150"/>
                            </HBox>
                        </VBox>

                        <Region HBox.hgrow="ALWAYS"/>

                        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÐºÐµÑ€ÑƒÐ²Ð°Ð½Ð½Ñ Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÐ°Ð¼Ð¸ -->
                        <HBox spacing="8">
                            <Button text="âž• Ð”Ð¾Ð´Ð°Ñ‚Ð¸" onAction="#addEmployee"
                                    style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;
                                           -fx-padding: 8 16; -fx-background-radius: 8;"/>

                            <Button text="âœï¸ Ð ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ñ‚Ð¸" onAction="#editEmployee"
                                    style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;
                                           -fx-padding: 8 16; -fx-background-radius: 8;"/>

                            <Button text="ðŸ—‘ï¸ Ð’Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸" onAction="#deleteEmployee"
                                    style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-weight: bold;
                                           -fx-padding: 8 16; -fx-background-radius: 8;"/>

                            <Button text="ðŸ”„ ÐžÐ½Ð¾Ð²Ð¸Ñ‚Ð¸" onAction="#refreshEmployees"
                                    style="-fx-background-color: #607D8B; -fx-text-fill: white; -fx-font-weight: bold;
                                           -fx-padding: 8 16; -fx-background-radius: 8;"/>
                        </HBox>
                    </HBox>

                    <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÑ–Ð² -->
                    <TableView fx:id="employeeTableView"
                               style="-fx-background-color: white; -fx-border-color: #c2e6c4; -fx-border-radius: 10;
                                      -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.02), 8, 0, 0, 2);"
                               VBox.vgrow="ALWAYS"/>

                    <!-- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ñ€Ð°Ñ†Ñ–Ð²Ð½Ð¸ÐºÑ–Ð² -->
                    <HBox alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
                        <Label fx:id="employeeStatusLabel" text="Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ..."
                               style="-fx-text-fill: #1a5c1f; -fx-font-weight: bold; -fx-font-size: 13px;"/>
                    </HBox>
                </VBox>
            </Tab>
        </TabPane>
    </center>

    <!-- ÐÐ˜Ð— -->
    <bottom>
        <HBox alignment="CENTER_LEFT"
              style="-fx-background-color: #f4fbf4; -fx-padding: 10 20; -fx-border-color: #c2e6c4; -fx-border-width: 1 0 0 0;">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ“Š" style="-fx-font-size: 16px;"/>
                <Label fx:id="statusLabel" text="Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ð´Ð¾ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸"
                       style="-fx-text-fill: #1a5c1f; -fx-font-weight: bold; -fx-font-size: 13px;"/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <Label text="ðŸ’§ ÐŸÐ¾Ð»Ñ‚Ð°Ð²Ð°Ð²Ð¾Ð´Ð¾ÐºÐ°Ð½Ð°Ð» â€¢ Ð’ÐµÑ€ÑÑ–Ñ 1.0"
                   style="-fx-text-fill: #81c784; -fx-font-size: 11px;"/>
        </HBox>
    </bottom>
</BorderPane>